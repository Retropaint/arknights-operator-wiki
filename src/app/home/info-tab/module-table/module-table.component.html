<table class="table" [ngClass]="{'not-first-module' : moduleIndex > 0}" *ngIf="moduleIndex > 0">
  <tbody>
    <tr>
      <th>
        Module
      </th>
    </tr>
    <tr>
      <td class="module-header">
        <ion-img *ngIf="moduleIndex == 0" src="https://raw.githubusercontent.com/Aceship/Arknight-Images/main/equip/icon/original.png"></ion-img>
        <ion-img *ngIf="moduleIndex > 0" src="https://raw.githubusercontent.com/Aceship/Arknight-Images/main/equip/icon/{{operator.modules[moduleIndex].id}}.png"></ion-img>
        <div class="content">
          <p>{{operator.modules[moduleIndex].name}}</p>
          <p [innerHTML]="trait"></p>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table" style="margin-bottom: 0px;" *ngIf="moduleIndex > 0">
  <tbody>
    <!--
      <tr>
      <th class="header">Missions</th>
      <td colspan="2">
        <p *ngFor="let mission of operator.modules[moduleIndex].missions"> {{mission.description}} </p>
      </td>
    </tr>
    -->
    <tr>
      <th  colspan="3">
        Missions
      </th>
    </tr>
    <tr *ngFor="let mission of operator.modules[moduleIndex].missions">
      <td colspan="3">{{mission.description}}</td>
    </tr>
    <tr>
      <th class="header">
        Level
      </th>
      <th class="header">
        Stat
      </th>
      <th class="header">
        Unlock Reqs.
      </th>
    </tr>
    <tr *ngFor="let level of operator.modules[moduleIndex].levels; let i=index">
      <th>
        {{i+1}}
      </th>
      <td>
        <div class="stat" *ngFor="let stat of level.stats">
          <ng-container *ngIf="stat.key != 'attack_speed'">
            <ion-img src="assets/icons/stats/{{stat.key}}.webp"></ion-img>
            +{{stat.value}}
          </ng-container>
          <ng-container *ngIf="stat.key == 'attack_speed'">
            ASPD +{{stat.value}}
          </ng-container>
        </div>
        <ng-container *ngIf="level.summonStats != null">
          <div style="margin-top: 10px" *ngFor="let summonStat of level.summonStats; let summonIndex = index">
            <p style="text-align: center">{{operator.summons[summonIndex].name}}</p>
            <div *ngFor="let stat of summonStat" class="stat" [ngClass]="{'no-margin' : stat.key == 'max_deck_stack_cnt' || stat.key == 'max_deploy_count'}">
              <ng-container *ngIf="stat.key != 'max_deck_stack_cnt' && stat.key != 'max_deploy_count' && stat.key != 'attack_speed'">
                <ion-img src="assets/icons/stats/{{stat.key}}.webp"></ion-img>
                {{stat.value}}
              </ng-container>
              <ng-container *ngIf="stat.key == 'attack_speed'">
                ASPD {{stat.value}}
              </ng-container>
            </div>
          </div>
        </ng-container>
      </td>
      <th>
        <app-item *ngFor="let itemCost of level.itemCosts" [item]="itemCost"></app-item>
      </th>
    </tr>
  </tbody>
</table>