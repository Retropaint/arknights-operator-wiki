<ion-header class="header" [ngClass]="{'blur' : isBlurry}">
  <div>
    <h1>Another Arknights Wiki</h1>
    <app-search-box (homePageReset)="refresh($event)"></app-search-box>
  </div>
  <ion-icon name="settings-outline" class="settings-button" (click)="openSettingsModal()"></ion-icon>
</ion-header>

<!--
<app-operator-transitioner (changeOperator)="refresh($event)"></app-operator-transitioner>
-->

<ion-content [ngClass]="{'blur' : isBlurry}">

  <p *ngIf="operator" class="op-name">{{operator.name}}</p>

  <div class="tabs">
    <p (click)="currentTab = 'info'" [ngClass]="{'selected' : currentTab == 'info'}">Info</p>
    <p (click)="currentTab = 'gallery'" [ngClass]="{'selected' : currentTab == 'gallery'}">Gallery</p>
  </div>
  
  <div class="dead-zone container" *ngIf="operator && currentTab == 'info'">

    <div class="left-container">
      
      <app-operator-briefer
        [operator]="operator"
      ></app-operator-briefer>

      <app-stat-table
        [operator]="operator"
      ></app-stat-table>

      <app-elite-unlock-reqs-table
        [operator]="operator"
      ></app-elite-unlock-reqs-table>

      <app-talent-table
        [operator]="operator"
      ></app-talent-table>

      <app-potential-table
        [operator]="operator"
      ></app-potential-table>

      <app-base-skill-table
        [operator]="operator"
      ></app-base-skill-table>

      <app-module-table
        *ngIf="operator.modules.length > 0"
        [operator]="operator"
        [moduleIndex]="1"
      ></app-module-table>
      
    </div>
    
    <div class="right-container" *ngIf="operator">
      <p class="close-gallery" (click)="isGalleryOpen = !isGalleryOpen">{{isGalleryOpen ? 'Close' : 'Open'}} mini-gallery</p>

      <app-operator-gallery
        *ngIf="isGalleryOpen"
        [operator]="operator"
      ></app-operator-gallery>

      <app-skill-table *ngIf="operator.rarity > 2 && !operator.name.includes('Reserve')"
        [operator]="operator"
      ></app-skill-table>
      
      <!--
        <app-skill-range-table
        [operator]="operator"
      ></app-skill-range-table>
      -->
      
      <!--
        <app-skill-mastery-unlock-reqs-table
        [operator]="operator"
      ></app-skill-mastery-unlock-reqs-table>
      -->
      
      <app-skill-level-unlock-reqs-table *ngIf="operator.rarity > 2 && !operator.name.includes('Reserve')"
        [operator]="operator"
      ></app-skill-level-unlock-reqs-table>

      <p style="text-align: center" *ngIf="operator.rarity < 3 || operator.name.includes('Reserve')">Skill issue</p>
    </div>

  </div>

  <div *ngIf="operator && currentTab == 'gallery'">
    <app-operator-gallery
      [isTab]="true"
      [operator]="operator"
    ></app-operator-gallery>
  </div>

</ion-content>
